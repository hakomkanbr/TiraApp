{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useEffect, useState } from 'react';\nimport { Form, Select, Button } from 'antd';\nimport InputCustum from 'components/elements/input/Input';\nimport TextArea from 'antd/lib/input/TextArea';\nimport router, { useRouter } from 'next/router';\nimport { getData, postData } from 'utils/fetchData';\nimport _app from 'utils/_app';\nimport CardCustum from 'components/elements/card/Card';\nimport pointsU from 'points';\nimport getBase64 from 'lib/helpers/getBase64';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst {\n  Option\n} = Select;\nconst formItemLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 14\n  }\n};\n\nconst NumberInput = ({\n  value = {},\n  onChange\n}) => {\n  const {\n    0: number,\n    1: setNumber\n  } = useState(0);\n\n  const triggerChange = changedValue => {\n    onChange === null || onChange === void 0 ? void 0 : onChange(_objectSpread(_objectSpread({\n      number\n    }, value), changedValue));\n  };\n\n  const onNumberChange = e => {\n    const newNumber = parseInt(e.target.value || '', 10);\n\n    if (!('number' in value)) {\n      setNumber(newNumber);\n    }\n\n    triggerChange({\n      number: newNumber\n    });\n  };\n\n  return /*#__PURE__*/_jsx(\"span\", {\n    children: /*#__PURE__*/_jsx(InputCustum, {\n      type: \"text\",\n      value: value.number || number,\n      onChange: onNumberChange,\n      style: {\n        width: 100\n      }\n    })\n  });\n};\n\nconst IcerikEkleDuznle = () => {\n  const [form] = Form.useForm();\n  const {\n    0: contentFoto,\n    1: setContentFoto\n  } = useState(null);\n  const {\n    0: max,\n    1: setMax\n  } = useState();\n  const history = useRouter();\n  const {\n    0: path,\n    1: setPath\n  } = useState(history.pathname); // var kategoriName = window.localStorage.getItem(\"kategori\");\n\n  const checkPrice = (_, value) => {\n    if (value.number >= 0) {\n      setMax(value.number);\n      return Promise.resolve();\n    }\n\n    return Promise.reject(new Error('Price must be greater than zero!'));\n  };\n\n  const onFinish = async values => {\n    try {\n      values.sorting = 1;\n      values.max = parseInt(values.max) || max;\n      values.categoryId = parseInt(window.sessionStorage.getItem(\"kategoriId\")); // values.categoryId = parseInt(_app.getSessionItem(\"kategoriId\"));\n\n      var obj = contentFoto !== null && contentFoto !== void 0 && contentFoto.length ? contentFoto[0] : \"\";\n      let x = \"\";\n\n      if (obj) {\n        if (obj.originFileObj) {\n          x = await getBase64(obj.originFileObj);\n        } else {\n          x = obj.url;\n        }\n      } // is Düzenle\n\n\n      if (!path.toString().includes(\"create\")) {\n        var _parseInt;\n\n        values.id = (_parseInt = parseInt(path.substring(path.lastIndexOf(\"/\") + 1))) !== null && _parseInt !== void 0 ? _parseInt : null;\n        await postData(pointsU.addEventRss, values, true);\n      } else {\n        await postData(pointsU.editEventRss, values, true);\n      }\n\n      history.push(\"/admin/category/\" + values.categoryId);\n    } catch (err) {\n      console.error(\"err\");\n      console.error(err);\n    }\n  };\n\n  useEffect(() => {\n    if (window.location.pathname.includes(\"edit/\")) {\n      getData(pointsU.getRssSingle + \"?eventId=\" + window.location.pathname.substr(window.location.pathname.lastIndexOf(\"/\") + 1), true).then(res => {\n        form.setFieldsValue(_objectSpread(_objectSpread({}, res), {}, {\n          max: {\n            number: res === null || res === void 0 ? void 0 : res.max\n          }\n        }));\n        setMax(res.max);\n      });\n    }\n  }, []);\n\n  const titleInput = /*#__PURE__*/_jsx(InputCustum, {\n    placeholder: \"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"\n  });\n\n  const maxInput = /*#__PURE__*/_jsx(NumberInput, {\n    placeholder: \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0646\\u0634\\u0648\\u0631\\u0627\\u062A\"\n  });\n\n  const urlInput = /*#__PURE__*/_jsx(InputCustum, {\n    placeholder: \"\\u0627\\u0644\\u0631\\u0627\\u0628\\u0637\"\n  });\n\n  return /*#__PURE__*/_jsx(CardCustum, {\n    title: \" أضف محتوى جديد ( Rss )\",\n    children: /*#__PURE__*/_jsxs(Form, _objectSpread(_objectSpread({\n      form: form,\n      name: \"validate_other\"\n    }, formItemLayout), {}, {\n      onFinish: onFinish,\n      children: [/*#__PURE__*/_jsx(Form.Item, {\n        name: \"name\",\n        label: \"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\",\n        children: titleInput\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        name: \"description\",\n        label: \"\\u0627\\u0644\\u0648\\u0635\\u0641\",\n        hasFeedback: true,\n        children: /*#__PURE__*/_jsx(TextArea, {\n          placeholder: \"\\u0627\\u0644\\u0648\\u0635\\u0641\"\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        name: \"max\",\n        rules: [{\n          validator: checkPrice\n        }],\n        label: \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0646\\u0634\\u0648\\u0631\\u0627\\u062A\",\n        children: maxInput\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        name: \"url\",\n        label: \"\\u0627\\u0644\\u0631\\u0627\\u0628\\u0637\",\n        children: urlInput\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        name: \"published\",\n        label: \"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\",\n        children: /*#__PURE__*/_jsxs(Select, {\n          placeholder: \"\\u064A\\u0631\\u062C\\u0649 \\u0627\\u0644\\u0623\\u062E\\u062A\\u064A\\u0627\\u0631\",\n          children: [/*#__PURE__*/_jsx(Option, {\n            value: true,\n            children: \"\\u0646\\u0634\\u0631\"\n          }), /*#__PURE__*/_jsx(Option, {\n            value: false,\n            children: \"\\u0639\\u062F\\u0645 \\u0627\\u0644\\u0646\\u0634\\u0631\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        wrapperCol: {\n          span: 12,\n          offset: 6\n        },\n        children: /*#__PURE__*/_jsx(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          children: \"\\u0623\\u0631\\u0633\\u0627\\u0644\"\n        })\n      })]\n    }))\n  });\n};\n\nexport default IcerikEkleDuznle;","map":null,"metadata":{},"sourceType":"module"}